<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ennew.iot.gateway.dal.mapper.ProtocolSupportMapper">

    <sql id="Base_Column_List">
        ps.id,
        ps.name,
        ps.description,
        ps.type,
        ps.way,
        ps.state,
        ps.is_template,
        ps.configuration
    </sql>

    <resultMap id="BaseResultMap" type="com.ennew.iot.gateway.dal.entity.ProtocolSupportEntity">
        <result column="configuration" property="configuration" typeHandler="com.baomidou.mybatisplus.extension.handlers.FastjsonTypeHandler"/>
    </resultMap>

    <select id="queryPage" parameterType="Map"
            resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        dev_protocol ps
        <where>
            <if test="params.id != null and params.id != ''">
               and ps.id = #{params.id}
            </if>
            <if test="params.name != null and params.name != ''">
                and ps.name like concat('%',#{params.name},'%')
            </if>
            <if test="params.type != null and params.type != ''">
                and ps.type = #{params.type}
            </if>
            <if test="params.way != null">
                and ps.way = #{params.way}
            </if>
            <if test="params.state != null">
                and ps.state = #{params.state}
            </if>
            <if test="params.isTemplate != null">
                and ps.is_template = #{params.isTemplate}
            </if>
            <if test="params.isDeleted != null">
                and ps.is_deleted = #{params.isDeleted}
            </if>
        </where>
        ORDER BY `create_time` DESC
    </select>

</mapper>
